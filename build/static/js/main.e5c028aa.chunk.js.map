{"version":3,"sources":["components/header/header.js","components/footer/footer.js","services/foto-service.js","components/spinner/spinnner.js","components/modal-window/close__button_black.svg","components/modal-window/modal-window.js","components/foto-container/foto-container.js","components/app/app.js","index.js"],"names":["Header","className","Footer","FotoService","_base","getResource","id","fetch","then","data","json","url","comment","resComment","date","resDate","undefined","comments","text","getImagesArray","a","res","postComments","method","headers","body","JSON","stringify","status","console","log","Spinner","ModalWindow","service","state","loading","valueName","valueComment","getModalData","props","obj","setState","changeName","evt","term","target","value","changeComment","formButtonClick","name","preventDefault","escKey","document","addEventListener","key","closeModal","this","Component","TopBlock","src","alt","onClick","style","backgroundImage","closeButton","Form","type","placeholder","required","onChange","FotoContainer","images","modalWindow","openModalWindow","imagesLoaded","removeEventListener","getFotoArray","renderFotoCards","map","item","render","App","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.e5c028aa.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport './header.css';\r\n\r\nconst Header = () => {\r\n\r\n  return (\r\n    <div className='header'>\r\n      <h1 className='header__title'>TEST APP</h1>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nimport './footer.css';\r\n\r\nconst Footer = () => {\r\n\r\n  return (\r\n    <div className='footer'>\r\n      <h2 className='footer__title'>&copy; 2018-2019</h2>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Footer;","export default class FotoService {\r\n\r\n  _base = 'https://boiling-refuge-66454.herokuapp.com/images';\r\n\r\n  getResource = (id) => {\r\n    const res = fetch(`${this._base}/${id}`);\r\n    const data = res.then((data) => data.json());\r\n\r\n    return data.then((data) => {\r\n\r\n      const obj = {\r\n        url: data.url,\r\n        comment: this.resComment(data),\r\n        date: this.resDate(data)\r\n      };\r\n\r\n        return obj;\r\n      })\r\n  };\r\n\r\n  resComment = (data) => {\r\n    if (data.comments[0] === undefined) {\r\n      return null;\r\n    } else {\r\n      const comment = data.comments[0];\r\n      return comment.text;\r\n    }\r\n  };\r\n\r\n  resDate = (data) => {\r\n    if (data.comments[0] === undefined) {\r\n      return null;\r\n    } else {\r\n      const comment = data.comments[0];\r\n      return comment.date;\r\n    }\r\n  };\r\n\r\n  getImagesArray = async () => {\r\n    const res = await fetch(this._base);\r\n    return res.json();\r\n  };\r\n\r\n  postComments = async (id, comments) => {\r\n    const res = await fetch(`${this._base}/${id}/comments`, {\r\n      method: 'Post',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(comments)\r\n    });\r\n\r\n    const data = await res.status;\r\n    console.log(data);\r\n    return data;\r\n  };\r\n};\r\n\r\n\r\n","import React from 'react';\r\n\r\nimport './spinner.css';\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"lds-css\">\r\n      <div className=\"lds-double-ring\">\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;","export default __webpack_public_path__ + \"static/media/close__button_black.44a2231a.svg\";","import React, { Component } from 'react';\r\n\r\nimport FotoService from '../../services/foto-service';\r\nimport Spinner from '../spinner/spinnner';\r\n\r\nimport './modal-window.css';\r\nimport closeButton from './close__button_black.svg';\r\n\r\nexport default class ModalWindow extends Component {\r\n\r\n  service = new FotoService();\r\n\r\n  state = {\r\n    url: null,\r\n    comment: null,\r\n    date: null,\r\n    loading: true,\r\n    valueName: '',\r\n    valueComment: ''\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.escKey();\r\n    this.getModalData();\r\n  };\r\n\r\n  getModalData = () => {\r\n    const res = this.service.getResource(this.props.id);\r\n    res.then((obj) => {\r\n      this.setState({\r\n        url: obj.url,\r\n        comment: obj.comment,\r\n        date: obj.date,\r\n        loading: false\r\n      })\r\n    })\r\n  };\r\n\r\n  changeName = (evt) => {\r\n    const term = evt.target.value;\r\n    this.setState({ valueName: term });\r\n  };\r\n\r\n  changeComment = (evt) => {\r\n    const term = evt.target.value;\r\n    this.setState({ valueComment: term });\r\n  };\r\n\r\n  formButtonClick = (evt) => {\r\n    const { id } = this.props;\r\n    const { valueName, valueComment } = this.state;\r\n    const res = this.service\r\n      .postComments(id, { name: valueName, comment: valueComment });\r\n    evt.preventDefault();\r\n    return res;\r\n  };\r\n\r\n  escKey = () => {\r\n    document.addEventListener('keydown', (evt) => {\r\n\r\n      if (evt.key !== 'Escape') {\r\n        return;\r\n      }\r\n\r\n      this.props.closeModal();\r\n    });\r\n  };\r\n\r\n  render() {\r\n\r\n    const {\r\n      url,\r\n      comment,\r\n      date,\r\n      loading,\r\n      valueName,\r\n      valueComment } = this.state;\r\n\r\n    if (loading) {\r\n      return (\r\n        <div className=\"modal-window\">\r\n          <div className='modal-window__container'>\r\n            <Spinner />\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div className=\"modal-window\">\r\n        <div className='modal-window__container'>\r\n          <TopBlock\r\n            url={url}\r\n            closeModal={() => this.props.closeModal}\r\n            comment={comment}\r\n            date={date} />\r\n          <Form\r\n            changeName={() => this.changeName}\r\n            changeComment={() => this.changeComment}\r\n            formButtonClick={() => this.formButtonClick}\r\n            valueName={valueName}\r\n            valueComment={valueComment} />\r\n        </div>\r\n      </div>\r\n    )\r\n  };\r\n};\r\n\r\nconst TopBlock = ({ url, closeModal, comment, date }) => {\r\n\r\n  return (\r\n    <div className='modal-window__top-flex-block'>\r\n      <img\r\n        className=\"modal-window__image\"\r\n        src={url}\r\n        alt=\"foto\" />\r\n      <button\r\n        className='modal-window__close-button'\r\n        onClick={closeModal()}\r\n        style={{ backgroundImage: `url(${closeButton})` }} >\r\n      </button>\r\n      <div className='modal-window__comments-block'>\r\n        <p className='modal-window__comments-date'>{date}</p>\r\n        <p className='modal-window__comment'>{comment}</p>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nconst Form = ({\r\n  changeName,\r\n  changeComment,\r\n  formButtonClick,\r\n  valueName,\r\n  valueComment }) => {\r\n\r\n  return (\r\n    <form className='form'>\r\n      <label className='form__label'>\r\n        <input\r\n          className='form__input'\r\n          type='text'\r\n          placeholder=' Ваше имя'\r\n          required\r\n          value={valueName}\r\n          onChange={changeName()} />\r\n      </label>\r\n      <label className='form__label'>\r\n        <input\r\n          className='form__input'\r\n          type='text'\r\n          placeholder=' Ваш комментарий'\r\n          value={valueComment}\r\n          required\r\n          onChange={changeComment()} />\r\n      </label>\r\n      <button\r\n        className='form__button'\r\n        type='button'\r\n        onClick={formButtonClick()} >\r\n        Оставьте коментарий\r\n      </button>\r\n    </form>\r\n  )\r\n};","import React, { Component } from 'react';\r\n\r\nimport FotoService from '../../services/foto-service';\r\nimport ModalWindow from '../modal-window/modal-window';\r\nimport Spinner from '../spinner/spinnner';\r\n\r\nimport './foto-container.css';\r\n\r\nexport default class FotoContainer extends Component {\r\n\r\n  service = new FotoService();\r\n\r\n  state = {\r\n    images: [],\r\n    loading: true,\r\n    modalWindow: false,\r\n    id: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getFotoArray();\r\n  };\r\n\r\n  openModalWindow = (id) => {\r\n    this.setState({\r\n      modalWindow: true,\r\n      id: id\r\n    })\r\n  };\r\n\r\n  imagesLoaded = (images) => {\r\n    this.setState({\r\n      images: images,\r\n      loading: false\r\n    })\r\n  };\r\n\r\n  closeModal = () => {\r\n\r\n    this.service.getImagesArray()\r\n      .then((images) => {\r\n        this.setState({\r\n          images: images,\r\n          loading: false,\r\n          modalWindow: false,\r\n          id: null\r\n        })\r\n      });\r\n\r\n    document.removeEventListener('keydown', (evt) => {\r\n\r\n      if (evt.key !== 'Escape') {\r\n        return;\r\n      }\r\n\r\n      this.props.closeModal();\r\n    });\r\n  };\r\n\r\n  getFotoArray = () => {\r\n    return this.service.getImagesArray()\r\n      .then(this.imagesLoaded);\r\n  };\r\n\r\n  renderFotoCards = () => {\r\n    const { images } = this.state;\r\n\r\n    return images.map((item) => {\r\n      return (\r\n        <img\r\n          className='foto-container__image'\r\n          alt='foto'\r\n          src={item.url}\r\n          key={item.id}\r\n          onClick={() => this.openModalWindow(item.id)} />\r\n      )\r\n    })\r\n  };\r\n\r\n  render() {\r\n\r\n    const { loading, modalWindow, id } = this.state;\r\n    const render = this.renderFotoCards();\r\n\r\n    if (loading) {\r\n      return <Spinner />;\r\n    }\r\n\r\n    if (modalWindow) {\r\n      return (\r\n        <div className='foto-container'>\r\n          {render}\r\n          <ModalWindow\r\n            id={id}\r\n            closeModal={this.closeModal} />\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div className='foto-container'>\r\n        {render}\r\n      </div>\r\n    )\r\n  };\r\n};\r\n\r\n","import React, { Component } from 'react';\r\n\r\nimport Header from '../header/header';\r\nimport Footer from '../footer/footer';\r\nimport FotoContainer from '../foto-container/foto-container';\r\n\r\nimport './app.css';\r\n\r\nexport default class App extends Component {\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div className='main-block'>\r\n        <Header />\r\n        <FotoContainer openModalWindow={this.openModalWindow} />\r\n        <Footer />\r\n      </div>\r\n    )\r\n  };\r\n};","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app/app';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}